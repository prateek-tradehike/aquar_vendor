<?php


/*
 * NOTICE OF LICENSE
 *
 * This source file is subject to the NekloEULA that is bundled with this package in the file LICENSE.txt.
 *
 * It is also available through the world-wide-web at this URL: http://store.neklo.com/LICENSE.txt
 *
 * Copyright (c)  Neklo (http://store.neklo.com/)
 */

use Neklo\Core\Block\System\Newsletter\Subscribe\Button;

/** @var Button $block */
?>
<?= $block->getButtonHtml(); ?>
<div class="neklo_core_message subscribe"></div>
<script>
    require([
        "neklocore/subscribe"
    ], function (Button) {
        new Button({
            'subscribeUrl': '<?= $block->escapeUrl($block->getUrl('neklo_core/newsletter/subscribe')); ?>',
            'successMessage': '<?= $block->escapeJsQuote(__('Successfully subscribed')); ?>',
            'errorMessage': '<?= $block->escapeJsQuote(__('Oops! Something went wrong!')); ?>',
            'successMessageClass': 'success',
            'errorMessageClass': 'error',
            'formContainerId': '<?= $block->escapeJsQuote($block->getContainerId()); ?>',
            'formElementSelectorList': {
                'email': ['required-entry', 'validate-email']
            },
            'subscribeButtonId': 'neklo_core_subscribe',
            'loadingMaskId': 'loading-mask',
            'messageContainerSelector': '.neklo_core_message.subscribe'
        });
    });
</script>
